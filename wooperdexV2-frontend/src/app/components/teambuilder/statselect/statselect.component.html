<div class="stats-container" *ngIf="currentPokemon">
    <div class="base-stats-section">
      <h3>Base Stats</h3>
      <div class="base-stats-grid">
        <div *ngFor="let stat of statKeys" class="base-stat-row">
          <div class="stat-label">{{ getStatLabel(stat) }}</div>
          <div class="base-stat-value">{{ getBaseStat(stat) }}</div>
          <div class="base-stat-bar">
            <mat-progress-bar 
              [value]="(getBaseStat(stat) / 255) * 100" 
              color="primary">
            </mat-progress-bar>
          </div>
        </div>
      </div>
    </div>
    
    <div class="ev-section">
      <h3>
        EVs 
        <span class="ev-remaining">(Remaining: {{ getRemainingEvs() }})</span>
        <button mat-button color="warn" class="reset-button" (click)="resetEvs()">Reset</button>
      </h3>
      
      <div class="ev-grid">
        <div *ngFor="let stat of statKeys" class="ev-row">
          <div class="stat-label">{{ getStatLabel(stat) }}</div>
          
          <div class="ev-controls">
            <button 
              mat-mini-fab 
              color="primary" 
              (click)="decreaseEv(stat)"
              [disabled]="(evForm.get(stat)?.value || 0) <= 0">
              <mat-icon>remove</mat-icon>
            </button>
            
            <input 
              type="number" 
              [value]="evForm.get(stat)?.value || 0"
              (input)="onEvInput(stat, $event)"
              class="ev-input">
            
            <button 
              mat-mini-fab 
              color="primary" 
              (click)="increaseEv(stat)"
              [disabled]="!canIncreaseEv(stat)">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="iv-section">
      <h3>
        IVs
        <button mat-button color="primary" class="perfect-button" (click)="perfectIvs()">Max All</button>
      </h3>
      
      <div class="iv-grid">
        <div *ngFor="let stat of statKeys" class="iv-row">
          <div class="stat-label">{{ getStatLabel(stat) }}</div>
          
          <div class="iv-controls">
            <button 
              mat-mini-fab 
              color="accent" 
              (click)="decreaseIv(stat)"
              [disabled]="(ivForm.get(stat)?.value || 0) <= ivMin">
              <mat-icon>remove</mat-icon>
            </button>
            
            <input 
              type="number" 
              [value]="ivForm.get(stat)?.value || 31"
              (input)="onIvInput(stat, $event)"
              class="iv-input"
              min="0"
              max="31">
            
            <button 
              mat-mini-fab 
              color="accent" 
              (click)="increaseIv(stat)"
              [disabled]="(ivForm.get(stat)?.value || 0) >= ivMax">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="nature-section">
      <h3>Nature</h3>
      <div class="nature-content">
        <mat-form-field appearance="outline">
          <mat-label>Select Nature</mat-label>
          <mat-select [(ngModel)]="nature">
            <mat-option *ngFor="let natureOption of natures" [value]="natureOption">
              {{ natureOption }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
    
    <div class="button-row">
      <button mat-button (click)="goBack()">Back</button>
      <button mat-raised-button color="primary" (click)="saveStatsAndContinue()">
        Save and Continue
      </button>
    </div>
  </div>
  
  <div class="no-pokemon" *ngIf="!currentPokemon">
    <p>Please select a Pok√©mon first</p>
    <button mat-button (click)="goBack()">Back to Item Selection</button>
  </div>